<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <!-- PWA 設定：manifest 嵌入 base64 -->
  <link rel="manifest" href="manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>韻母輪播</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: #121212;
      font-family: "Microsoft JhengHei", "PingFang TC", "Noto Sans CJK TC", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
      padding: 10px;
    }

    #yunmu-container {
      width: 100%;
      max-width: 480px;
      padding: 15px;
      background: #1e1e1e;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 12px;
      color: white;
      overflow: hidden;
    }

    .category {
      font-size: clamp(18px, 4vw, 24px); /* 自適應字體 */
      color: #3498db;
      font-weight: bold;
      margin: 0;
      line-height: 1.2;
    }

    .yunmu {
      font-size: clamp(50px, 12vw, 90px); /* 關鍵字：韻母字體自動縮放 */
      color: #e74c3c;
      font-family: monospace;
      margin: 5px 0;
      line-height: 0.8;
      word-wrap: break-word;
      font-weight: bold;
    }

    .example {
      font-size: clamp(30px, 6vw, 50px);
      color: #2ecc71;
      margin: 5px 0;
      font-weight: 500;
    }

    .zhuyin {
      font-size: clamp(28px, 6vw, 40px);
      color: #9b59b6;
      letter-spacing: 4px;
      margin: 5px 0;
      font-weight: 500;
    }

    .progress {
      font-size: clamp(14px, 3vw, 16px);
      color: #bdc3c7;
      margin: 8px 0 0;
    }

    .timer-bar {
      width: 100%;
      height: 6px;
      background: #34495e;
      border-radius: 3px;
      margin-top: 10px;
      overflow: hidden;
    }

    #timer-progress {
      height: 100%;
      width: 0%;
      background: #2ecc71;
      transition: width 1s linear;
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      width: 100%;
      justify-content: space-between;
    }

    button {
      padding: 12px 16px;
      font-size: clamp(12px, 3.5vw, 16px);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      color: white;
      transition: transform 0.2s, opacity 0.2s;
      flex: 1;
      min-width: 0; /* 避免按鈕被拉長 */
    }

    button:hover {
      transform: scale(1.05);
      opacity: 0.95;
    }

    #prevBtn {
      background: #3498db;
    }

    #pauseBtn {
      background: #e74c3c;
    }

    #nextBtn {
      background: #2ecc71;
    }

    /* 小螢幕優化：防止內容被遮擋 */
    @media (max-width: 320px) {
      #yunmu-container {
        padding: 12px;
      }
      .yunmu {
        font-size: clamp(40px, 14vw, 80px);
      }
    }

    /* 防止橫屏時內容被壓縮 */
    @media (orientation: landscape) and (max-height: 400px) {
      #yunmu-container {
        gap: 8px;
        padding: 10px;
      }
      .category,
      .example,
      .zhuyin,
      .progress {
        font-size: clamp(14px, 4vw, 20px);
      }
      .yunmu {
        font-size: clamp(45px, 15vw, 85px);
      }
    }
  </style>
</head>
<body>
  <div id="yunmu-container">
    <div class="category" id="category">載入中…</div>
    <div class="yunmu" id="yunmu">—</div>
    <div class="example" id="example">—</div>
    <div class="zhuyin" id="zhuyin">—</div>
    <div class="progress" id="progress">第 0 / 39 個</div>
    <div class="timer-bar">
      <div id="timer-progress"></div>
    </div>
    <div class="controls">
      <button id="prevBtn">◀ 上一個</button>
      <button id="pauseBtn">⏸ 暫停</button>
      <button id="nextBtn">下一個 ▶</button>
    </div>
  </div>

  <script>
    // 所有韻母資料（共39個）
    const yunmuList = [
      { yunmu: 'a', example: '啊', zhuyin: 'ㄚ', category: '單韻母' },
      { yunmu: 'o', example: '喔', zhuyin: 'ㄛ', category: '單韻母' },
      { yunmu: 'e', example: '鵝', zhuyin: 'ㄜ', category: '單韻母' },
      { yunmu: 'i', example: '衣', zhuyin: 'ㄧ', category: '單韻母' },
      { yunmu: 'u', example: '烏', zhuyin: 'ㄨ', category: '單韻母' },
      { yunmu: 'ü', example: '魚', zhuyin: 'ㄩ', category: '單韻母' },
      { yunmu: 'ai', example: '愛', zhuyin: 'ㄞ', category: '複韻母' },
      { yunmu: 'ei', example: '肥', zhuyin: 'ㄟ', category: '複韻母' },
      { yunmu: 'ao', example: '奧', zhuyin: 'ㄠ', category: '複韻母' },
      { yunmu: 'ou', example: '歐', zhuyin: 'ㄡ', category: '複韻母' },
      { yunmu: 'ia', example: '呀', zhuyin: 'ㄧㄚ', category: '複韻母' },
      { yunmu: 'ie', example: '耶', zhuyin: 'ㄧㄝ', category: '複韻母' },
      { yunmu: 'ua', example: '哇', zhuyin: 'ㄨㄚ', category: '複韻母' },
      { yunmu: 'uo', example: '渦', zhuyin: 'ㄨㄛ', category: '複韻母' },
      { yunmu: 'üe', example: '月', zhuyin: 'ㄩㄝ', category: '複韻母' },
      { yunmu: 'an', example: '安', zhuyin: 'ㄢ', category: '前鼻韻母' },
      { yunmu: 'en', example: '恩', zhuyin: 'ㄣ', category: '前鼻韻母' },
      { yunmu: 'in', example: '因', zhuyin: 'ㄧㄣ', category: '前鼻韻母' },
      { yunmu: 'un', example: '溫', zhuyin: 'ㄨㄣ', category: '前鼻韻母' },
      { yunmu: 'ün', example: '雲', zhuyin: 'ㄩㄣ', category: '前鼻韻母' },
      { yunmu: 'ian', example: '煙', zhuyin: 'ㄧㄢ', category: '前鼻韻母' },
      { yunmu: 'uan', example: '弯', zhuyin: 'ㄨㄢ', category: '前鼻韻母' },
      { yunmu: 'üan', example: '冤', zhuyin: 'ㄩㄢ', category: '前鼻韻母' },
      { yunmu: 'ang', example: '昂', zhuyin: 'ㄤ', category: '後鼻韻母' },
      { yunmu: 'eng', example: '熊', zhuyin: 'ㄥ', category: '後鼻韻母' },
      { yunmu: 'ing', example: '英', zhuyin: 'ㄧㄥ', category: '後鼻韻母' },
      { yunmu: 'ong', example: '轟', zhuyin: 'ㄨㄥ', category: '後鼻韻母' },
      { yunmu: 'iang', example: '央', zhuyin: 'ㄧㄤ', category: '後鼻韻母' },
      { yunmu: 'uang', example: '汪', zhuyin: 'ㄨㄤ', category: '後鼻韻母' },
      { yunmu: 'iong', example: '雍', zhuyin: 'ㄩㄥ', category: '後鼻韻母' },
      { yunmu: 'ueng', example: '翁', zhuyin: 'ㄨㄥ', category: '後鼻韻母' },
      { yunmu: 'er', example: '兒', zhuyin: 'ㄦ', category: '兒化韻' }
    ];

    let currentIndex = 0;
    let autoPlay = true;
    const intervalTime = 10000; // 10 秒
    let timer;

    const categoryEl = document.getElementById('category');
    const yunmuEl = document.getElementById('yunmu');
    const exampleEl = document.getElementById('example');
    const zhuyinEl = document.getElementById('zhuyin');
    const progressEl = document.getElementById('progress');
    const timerProgress = document.getElementById('timer-progress');

    function updateDisplay(index) {
      const item = yunmuList[index];
      categoryEl.textContent = item.category;
      yunmuEl.textContent = item.yunmu;
      exampleEl.textContent = item.example;
      zhuyinEl.textContent = item.zhuyin;
      progressEl.textContent = `第 ${index + 1} / ${yunmuList.length} 個`;

      // 重置進度條
      timerProgress.style.width = '0%';
      setTimeout(() => {
        if (autoPlay) {
          timerProgress.style.width = '100%';
        }
      }, 100);
    }

    function startTimer() {
      clearTimeout(timer);
      if (autoPlay) {
        timer = setTimeout(() => {
          nextYunmu();
        }, intervalTime);
      }
    }

    function nextYunmu() {
      currentIndex = (currentIndex + 1) % yunmuList.length;
      updateDisplay(currentIndex);
      startTimer();
    }

    function prevYunmu() {
      currentIndex = (currentIndex - 1 + yunmuList.length) % yunmuList.length;
      updateDisplay(currentIndex);
      startTimer();
    }

    function togglePlayPause() {
      autoPlay = !autoPlay;
      const pauseBtn = document.getElementById('pauseBtn');
      pauseBtn.textContent = autoPlay ? '⏸ 暫停' : '▶ 播放';
      if (autoPlay) {
        startTimer();
        timerProgress.style.width = '100%';
      } else {
        clearTimeout(timer);
        timerProgress.style.width = '0%';
      }
    }

    // 事件綁定
    document.getElementById('nextBtn').addEventListener('click', () => nextYunmu());
    document.getElementById('prevBtn').addEventListener('click', () => prevYunmu());
    document.getElementById('pauseBtn').addEventListener('click', togglePlayPause);

    // 鍵盤控制
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextYunmu();
      if (e.key === 'ArrowLeft') prevYunmu();
      if (e.key === ' ') {
        e.preventDefault();
        togglePlayPause();
      }
    });

    // 初始化
    updateDisplay(currentIndex);
    startTimer();

    // 監聽螢幕旋轉，重新調整
    window.addEventListener('resize', () => {
      // 重置進度條，避免旋轉時卡住
      if (autoPlay) timerProgress.style.width = '100%';
    });
  </script>
</body>
</html>
